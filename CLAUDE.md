# CLAUDE.md - Reviews Parser API Documentation

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ—Ç–∑—ã–≤–æ–≤ —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã 2GIS –¥–ª—è —Å–µ—Ç–∏ —Ç–æ—á–µ–∫ –ø—Ä–æ–¥–∞–∂ "–°–∞–Ω–¥—ã–∫ –¢–∞—Ä—ã" –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è API –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–æ–±—Ä–∞–Ω–Ω—ã–º –¥–∞–Ω–Ω—ã–º.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã:

1. **Parser** (`parser.py`)
   - –ö–ª–∞—Å—Å `TwoGISReviewsParser` –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ—Ç–∑—ã–≤–æ–≤ —á–µ—Ä–µ–∑ –ø—É–±–ª–∏—á–Ω–æ–µ API 2GIS
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –∏ batch-–æ–±—Ä–∞–±–æ—Ç–∫–∏
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∏–∑ –æ—Ç–∑—ã–≤–æ–≤
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ CSV –∏ JSON —Ñ–æ—Ä–º–∞—Ç—ã

2. **Database** (`database.py`)
   - PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –ø–æ—Ä—Ç—É 5436
   - SQLAlchemy ORM –º–æ–¥–µ–ª–∏
   - –¢—Ä–∏ —Ç–∞–±–ª–∏—Ü—ã: branches, reviews, parse_reports
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ JSON –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
   - –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

3. **API** (`api_v2.py`)
   - FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –ø–æ—Ä—Ç—É 8004
   - RESTful endpoints –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –≤ API –æ—Ç–≤–µ—Ç–∞—Ö
   - Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
   - CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞

4. **Migration** (`migrate_to_db.py`)
   - –°–∫—Ä–∏–ø—Ç –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ CSV/JSON –≤ PostgreSQL
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞—Ç
   - –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤ –æ –º–∏–≥—Ä–∞—Ü–∏–∏

5. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥** (`daily_parse.py`)
   - –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –Ω–æ–≤—ã—Ö –æ—Ç–∑—ã–≤–æ–≤
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ cron (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 3:00)
   - –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞
   - –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤ –≤ –ë–î

## üåê –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –î–æ–º–µ–Ω
- **Production URL**: https://reviews.aqniet.site
- **SSL**: Let's Encrypt (–¥–æ 2025-10-07)
- **Nginx**: Reverse proxy –≤ host network mode

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL 15 –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- **API —Å–µ—Ä–≤–µ—Ä**: Python 3.11 + FastAPI + uvicorn
- **Systemd**: reviews-api.service –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
- **Nginx**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ `/root/projects/hr-miniapp/nginx.conf`

### –ü–æ—Ä—Ç—ã
- **8004** - API —Å–µ—Ä–≤–µ—Ä
- **5436** - PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

## üìä API Endpoints

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
- `GET /` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± API
- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
- `GET /docs` - Swagger UI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `GET /redoc` - ReDoc –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### API v1
- `GET /api/v1/branches` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–∏–ª–∏–∞–ª–æ–≤
- `GET /api/v1/branches/{branch_id}/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ñ–∏–ª–∏–∞–ª–∞
- `GET /api/v1/reviews` - –û—Ç–∑—ã–≤—ã —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- `GET /api/v1/reviews/{review_id}` - –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –æ—Ç–∑—ã–≤
- `GET /api/v1/stats` - –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /api/v1/stats/recent` - –ù–µ–¥–∞–≤–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- `branch_id` - ID —Ñ–∏–ª–∏–∞–ª–∞
- `branch_name` - –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª–∏–∞–ª–∞
- `rating` - –†–µ–π—Ç–∏–Ω–≥ (1-5)
- `verified_only` - –¢–æ–ª—å–∫–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ
- `date_from/date_to` - –î–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç
- `search` - –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É
- `sort_by` - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- `order` - –ü–æ—Ä—è–¥–æ–∫ (asc/desc)
- `skip/limit` - –ü–∞–≥–∏–Ω–∞—Ü–∏—è

### –ü–æ–ª—è –æ—Ç–≤–µ—Ç–∞ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏
–ö–∞–∂–¥—ã–π –æ—Ç–∑—ã–≤ —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç:
- `photos_count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
- `photos_urls` - –º–∞—Å—Å–∏–≤ URL —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Environment Variables (.env)
```env
DATABASE_URL=postgresql://reviews_user:reviews_password@localhost:5436/reviews_db
API_HOST=0.0.0.0
API_PORT=8004
PARSER_API_KEY=6e7e1929-4ea9-4a5d-8c05-d601860389bd
```

### Nginx Configuration
‚ö†Ô∏è **–í–ê–ñ–ù–û**: Nginx —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ host network mode, –ø–æ—ç—Ç–æ–º—É –≤—Å–µ upstream-—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `127.0.0.1` –≤–º–µ—Å—Ç–æ –∏–º–µ–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
```nginx
proxy_pass http://127.0.0.1:8004;  # –ù–ï http://reviews-api:8004
```

## üöÄ –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ó–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–∞
```bash
systemctl start reviews-api.service
systemctl stop reviews-api.service
systemctl restart reviews-api.service
systemctl status reviews-api.service
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
journalctl -u reviews-api.service -f
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
docker exec -it reviews-db psql -U reviews_user -d reviews_db

# Backup
docker exec reviews-db pg_dump -U reviews_user reviews_db > backup.sql

# Restore
docker exec -i reviews-db psql -U reviews_user reviews_db < backup.sql
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥
```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ (–æ–¥–∏–Ω —Ä–∞–∑)
./setup_cron.sh

# –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞
source venv/bin/activate
python daily_parse.py

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞
tail -f logs/cron.log
tail -f logs/daily_parse_*.log
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ cron –∑–∞–¥–∞–Ω–∏—è–º–∏
```bash
crontab -l                    # –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–∏—Ö –∑–∞–¥–∞–Ω–∏–π
crontab -e                    # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
./run_daily_parse.sh          # –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ wrapper
```

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è API
```bash
curl https://reviews.aqniet.site/health
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ
```bash
curl http://127.0.0.1:8004/health
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å 502 Bad Gateway
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞: `systemctl status reviews-api.service`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç: `netstat -tlnp | grep 8004`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å firewall: `ufw status`
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å nginx logs: `docker logs hr-nginx`

## üìä –¢–µ–∫—É—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã

- **–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤**: 18,753
- **–û—Ç–∑—ã–≤–æ–≤ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏**: 2,642 (14.1%)
- **–ê–∫—Ç–∏–≤–Ω—ã—Ö —Ñ–∏–ª–∏–∞–ª–æ–≤**: 20 –∏–∑ 23
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥**: ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 3:00)
- **–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2025-07-09

## üìã TODO / –£–ª—É—á—à–µ–Ω–∏—è

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
   - –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ —Å–±–æ—è—Ö –ø–∞—Ä—Å–∏–Ω–≥–∞
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –æ—Ç–∑—ã–≤–∞—Ö

2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
   - –î–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –¥–ª—è API
   - Rate limiting –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î

4. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**
   - –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
   - –ê–Ω–∞–ª–∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π –≤ –æ—Ç–∑—ã–≤–∞—Ö
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ—Ç–∑—ã–≤–æ–≤ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- PostgreSQL –ø–∞—Ä–æ–ª—å —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ environment variables
- SSL/TLS —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Let's Encrypt
- CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –≤—Å–µ—Ö –¥–æ–º–µ–Ω–æ–≤ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å)
- Rate limiting —á–µ—Ä–µ–∑ nginx
- Firewall –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è Docker —Å–µ—Ç–∏

## üìù –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
/root/projects/reviews-parser/
‚îú‚îÄ‚îÄ api_v2.py                    # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
‚îú‚îÄ‚îÄ database.py                  # SQLAlchemy –º–æ–¥–µ–ª–∏ (—Å –ø–æ–ª—è–º–∏ –¥–ª—è —Ñ–æ—Ç–æ)
‚îú‚îÄ‚îÄ parser.py                    # –ü–∞—Ä—Å–µ—Ä 2GIS (—Å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π)
‚îú‚îÄ‚îÄ daily_parse.py               # –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ (–Ω–æ–≤—ã–π)
‚îú‚îÄ‚îÄ setup_cron.sh                # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞
‚îú‚îÄ‚îÄ run_daily_parse.sh           # Wrapper –¥–ª—è cron (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ migrate_to_db.py             # –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ parse_sandyq_tary.py         # –ü–∞—Ä—Å–∏–Ω–≥ –≤—Å–µ—Ö —Ñ–∏–ª–∏–∞–ª–æ–≤
‚îú‚îÄ‚îÄ analyze_reviews.py           # –ê–Ω–∞–ª–∏–∑ –æ—Ç–∑—ã–≤–æ–≤
‚îú‚îÄ‚îÄ requirements.txt             # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env                         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ docker-compose.yml           # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Dockerfile                   # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ reviews-api.service          # Systemd —Å–µ—Ä–≤–∏—Å
‚îú‚îÄ‚îÄ setup_deployment.sh          # –°–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏
‚îú‚îÄ‚îÄ nginx-reviews.conf           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è nginx
‚îú‚îÄ‚îÄ CLAUDE.md                    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ data/                        # –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îî‚îÄ‚îÄ sandyq_tary_branches.csv # –°–ø–∏—Å–æ–∫ —Ñ–∏–ª–∏–∞–ª–æ–≤
‚îú‚îÄ‚îÄ logs/                        # –õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ cron.log                 # –õ–æ–≥–∏ cron –∑–∞–¥–∞–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ daily_parse_*.log        # –õ–æ–≥–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
‚îî‚îÄ‚îÄ output/                      # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–∞—Ä—Å–∏–Ω–≥–∞
    ‚îú‚îÄ‚îÄ reviews_*.csv
    ‚îî‚îÄ‚îÄ reviews_*.json
```

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `journalctl -u reviews-api.service -n 100`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ë–î: `docker ps | grep reviews-db`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å nginx: `docker logs hr-nginx --tail 50`
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥: `tail -f logs/cron.log`
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –¥–ª—è —Ä–µ—à–µ–Ω–∏—è —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

## üîó –ü—Ä–∏–º–µ—Ä—ã API –∑–∞–ø—Ä–æ—Å–æ–≤

### –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–æ–≤ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏:
```bash
curl "https://reviews.aqniet.site/api/v1/reviews?branch_id=70000001067929337&limit=10" | jq '.[] | select(.photos_count > 0)'
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ñ–∏–ª–∏–∞–ª—É:
```bash
curl "https://reviews.aqniet.site/api/v1/branches/70000001067929337/stats" | jq .
```

### –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã:
```bash
curl "https://reviews.aqniet.site/api/v1/stats" | jq .
```

---
–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2025-07-09 19:53  
–í–µ—Ä—Å–∏—è: 2.1.0 (—Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–∞—Ä—Å–∏–Ω–≥–æ–º)